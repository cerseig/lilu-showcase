"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Component=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"hasComponent",value:function(e){return null!==(e+"").match(/^[A-Z]/)}},{key:"init",value:function(){this.components.forEach(function(e){"function"==typeof e.init&&e.init()})}},{key:"components",get:function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&this.hasComponent(t)&&e.push(this[t]);return e}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Component.List=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),0===arguments.length?e=[]:Array.isArray(e)||(e=[e]),this.items=e}return _inherits(t,e),_createClass(t,[{key:"cycle",value:function(e){return this.get(e%this.length)}},{key:"push",value:function(){var e;return(e=this.items).push.apply(e,arguments),this}},{key:"concat",value:function(e){var t=this;e.each(function(e){return t.push(e)})}},{key:"each",value:function(e){var t=this;return this.items.forEach(function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(t,r)}),this}},{key:"map",value:function(e){var t=this;return new this.constructor(this.items.map(function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(t,r)}))}},{key:"get",value:function(e){return this.items[e]}},{key:"set",value:function(e,t){this.items[e]=t}},{key:"index",value:function(e,t){var n=this.items.indexOf(e);if(-1===n)return null;"function"==typeof t&&t.call(this,n)}},{key:"remove",value:function(e){var t=this;return null!==this.index(e,function(e){return t.removeAt(e)})}},{key:"removeAt",value:function(e){return e=parseInt(e,10),!isNaN(e)&&e>=0&&e<this.length&&(this.items.splice(e,1),!0)}},{key:"clear",value:function(){this.items.splice(0,this.length)}},{key:"length",get:function(){return this.items.length}},{key:"first",get:function(){return this.get(0)},set:function(e){this.set(0,e)}},{key:"last",get:function(){return this.get(this.length-1)},set:function(e){this.set(this.length-1,e)}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Component.Number=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.value=0===arguments.length?this.constructor["default"]:e}return _inherits(t,e),_createClass(t,[{key:"value",get:function(){return this._value},set:function(e){this._value="number"==typeof e?this.constructor.filter(e):this.constructor.cast(e),isNaN(this._value)?this._value=this.constructor["default"]:this._value<this.constructor.minimum?this._value=this.constructor.minimum:this._value>this.constructor.maximum&&(this._value=this.constructor.maximum)}}],[{key:"cast",value:function(e){return parseFloat(e,10)}},{key:"filter",value:function(e){return e}},{key:"minimum",get:function(){return-Infinity}},{key:"maximum",get:function(){return Infinity}},{key:"default",get:function(){return 0}}]),t}(Component);var _get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}},Application=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),t}(Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch=function(e){function t(e){var n=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),console.log(e),this.element=e,this.canvas=new this.constructor.Canvas(this.element.querySelector("#canvas")),this.touches=new this.constructor.Touch.List,this.brush=new Application.DreamySketch.Brush.Pen;var r=function e(){n.drawing?(n.draw(),window.requestAnimationFrame(e)):window.cancelAnimationFrame(e)},o=function(e){e.preventDefault(),n.touches.updateFromMouseEvent(e)},i=function(e){e.preventDefault(),n.touches.updateFromTouchEvent(e)};this.mousedown=function(e){o(e),window.addEventListener("mousemove",o),r()},this.mouseup=function(){n.touches.clear(),window.removeEventListener("mousemove",o)},this.touchstart=function(e){i(e),window.addEventListener("touchmove",i),r()},this.touchend=function(e){n.touches.updateFromTouchEvent(e),n.drawing||window.removeEventListener("touchmove",i)}}return _inherits(t,e),_createClass(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"enable",value:function(){this.canvas.element.addEventListener("mousedown",this.mousedown),window.addEventListener("mouseup",this.mouseup),this.canvas.element.addEventListener("touchstart",this.touchstart),this.canvas.element.addEventListener("touchend",this.touchend)}},{key:"disable",value:function(){this.canvas.element.removeEventListener("mousedown",this.mousedown),window.removeEventListener("mouseup",this.mouseup),this.canvas.element.removeEventListener("touchstart",this.touchstart),this.canvas.element.removeEventListener("touchend",this.touchend),this.touches.clear()}},{key:"draw",value:function(){this.brush.shapes(this.touches).draw(this.canvas)}},{key:"drawing",get:function(){return this.touches.any}},{key:"enabled",get:function(){return this._enabled},set:function(e){if((e=!!e)!==this._enabled){this._enabled=e;var t=(e?"add":"remove")+"EventListener";this.canvas.element[t]("mousedown",this.mousedown),window[t]("mouseup",this.mouseup),this.canvas.element[t]("touchstart",this.touchstart),this.canvas.element[t]("touchend",this.touchend)}}}],[{key:"init",value:function(){_get(Object.getPrototypeOf(t),"init",this).call(this)}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.density=1,this.time=0}return _inherits(t,e),_createClass(t,[{key:"compute",value:function(){}},{key:"shapes",value:function(e){this.time=Date.now();for(var t=new Application.DreamySketch.Brush.Shape.List,n=0;n<this.density;n++)t.concat(this.compute(e,n));return t}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Canvas=function(e){function t(e){var n=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.element=e,this.context=this.element.getContext("2d"),this.resizeListener=function(){clearTimeout(n.resizeTimeout),n.resizeTimeout=setTimeout(function(){return n.resize()},200)},this.autoResize=!0,this.blank=!0}return _inherits(t,e),_createClass(t,[{key:"clear",value:function(){this.context.clearRect(0,0,this.width,this.height),this.blank=!0}},{key:"blob",value:function(e){return this.element.toBlob(e)}},{key:"load",value:function(e,t){var n=this,r=new Image;r.onload=function(){n.clear(),n.context.drawImage(r,0,0),n.blank=!1,"function"==typeof t&&t.call(n)},r.src=e}},{key:"transition",value:function(e,t){var n=this;this.element.style.transition=e/1e3+"s",setTimeout(function(){return t.call(n)},1),setTimeout(function(){return n.element.style.transition=null},e+1)}},{key:"show",value:function(){var e=this,t=arguments.length<=0||arguments[0]===undefined?0:arguments[0];0===t?this.element.style.opacity=null:this.transition(t,function(){return e.element.style.opacity=null})}},{key:"hide",value:function(){var e=this,t=arguments.length<=0||arguments[0]===undefined?0:arguments[0];0===t?this.element.style.opacity=0:this.transition(t,function(){return e.element.style.opacity=0})}},{key:"resize",value:function(){var e=this;if(this.parent){var t=new Image;t.onload=function(){return e.context.drawImage(t,0,0)},this.blob(function(n){e.width=e.parent.offsetWidth,e.height=e.parent.offsetHeight,n&&(t.src=URL.createObjectURL(n))})}}},{key:"parent",get:function(){return this.element.parentNode}},{key:"width",get:function(){return this.element.width},set:function(e){this.element.width=e}},{key:"height",get:function(){return this.element.height},set:function(e){this.element.height=e}},{key:"autoResize",get:function(){return this._autoResize||!1},set:function(e){(e=!!e)!==this.autoResize&&(e?(window.addEventListener("resize",this.resizeListener),this.resize()):window.removeEventListener("resize",this.resizeListener))}},{key:"url",get:function(){return this.element.toDataURL()}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.components={red:new this.constructor.Component.Rgb,green:new this.constructor.Component.Rgb,blue:new this.constructor.Component.Rgb,alpha:new this.constructor.Component.Alpha},this.formats={rgb:new this.constructor.Format.Rgb(this),rgba:new this.constructor.Format.Rgba(this),hexadecimal:new this.constructor.Format.Hexadecimal(this)},this.set.apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"each",value:function(e,t){for(var n in this.components)if(("alpha"!==n||!0===t)&&!1===e.call(this,n,this[n]))break;return this}},{key:"map",value:function(e,t){var n=this;return this.each(function(t,r){n[t]=e.call(n,t,r)},t)}},{key:"set",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.each(n,function(t,n){return e[t]=n}),this}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.each(n,function(t,n){return e[t]+=n}),this}},{key:"substract",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.each(n,function(t,n){return e[t]-=n}),this}},{key:"multiply",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.each(n,function(t,n){return e[t]*=n}),this}},{key:"divide",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.each(n,function(t,n){return e[t]/=n}),this}},{key:"pow",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.constructor.each(n,function(t,n){return e[t]=Math.pow(e[t],n)}),this}},{key:"square",value:function(){return this.pow(2,2,2)}},{key:"reverse",value:function(){return this.map(function(e,t){return 255-t})}},{key:"invert",value:function(){return this.map(function(e,t){return 0===t?0:1/t})}},{key:"transparent",value:function(){return this.set({alpha:0})}},{key:"clear",value:function(){return this.set(0,0,0,1)}},{key:"red",get:function(){return this.components.red.value},set:function(e){return this.components.red.value=e}},{key:"green",get:function(){return this.components.green.value},set:function(e){return this.components.green.value=e}},{key:"blue",get:function(){return this.components.blue.value},set:function(e){return this.components.blue.value=e}},{key:"alpha",get:function(){return this.components.alpha.value},set:function(e){return this.components.alpha.value=e}},{key:"r",get:function(){return this.red},set:function(e){this.red=e}},{key:"g",get:function(){return this.green},set:function(e){this.green=e}},{key:"b",get:function(){return this.blue},set:function(e){this.blue=e}},{key:"a",get:function(){return this.alpha},set:function(e){this.alpha=e}},{key:"rgb",get:function(){return this.formats.rgb.value},set:function(e){return this.formats.rgb.value=e}},{key:"rgba",get:function(){return this.formats.rgba.value},set:function(e){return this.formats.rgba.value=e}},{key:"hexadecimal",get:function(){return this.formats.hexadecimal.value},set:function(e){return this.formats.hexadecimal.value=e}},{key:"hex",get:function(){return this.hexadecimal},set:function(e){return this.hexadecimal=e}},{key:"string",get:function(){return this.rgba},set:function(e){var t=this.Format.matching(e);t?t.set(this,e):this.clear()}},{key:"clone",get:function(){return new this.constructor(this.r,this.g,this.b,this.a)}},{key:"reverted",get:function(){return this.clone.revert()}},{key:"inverted",get:function(){return this.clone.invert()}},{key:"squared",get:function(){return this.clone.square()}},{key:"transparented",get:function(){return this.clone.transparent()}}],[{key:"each",value:function(e,t){var n=this;"object"!=typeof e[0]||null===e[0]||Array.isArray(e)?["r","g","b","a"].forEach(function(r,o){o<e.length&&t.call(n,r,e[o])}):["r","g","b","a","red","green","blue","alpha","rgb","rgba","hex","hexadecimal"].forEach(function(r){e[r]!==undefined&&t.call(n,r,e[r])})}},{key:"black",get:function(){return new this}},{key:"white",get:function(){return new this(255,255,255)}},{key:"red",get:function(){return new this(255)}},{key:"green",get:function(){return new this(0,255)}},{key:"blue",get:function(){return new this(0,0,255)}},{key:"cyan",get:function(){return new this(0,255,255)}},{key:"magenta",get:function(){return new this(255,0,255)}},{key:"yellow",get:function(){return new this(255,255)}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Noise=function(e){function t(e,n){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.simplex=new SimplexNoise,this.bound(e,n)}return _inherits(t,e),_createClass(t,[{key:"bound",value:function(e,t){return this.minimum="number"==typeof e?e:-1,this.maximum="number"==typeof t?t:1,this}},{key:"value",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.length<2?n=0==n.length?[0,0]:[n[0],n[0]]:n.length>4&&(n=n.slice(0,4)),.5*((e=this.simplex)["noise"+n.length+"D"].apply(e,_toConsumableArray(n))+1)*this.delta+this.minimum}},{key:"time",value:function(e,t){return this.value(Date.now()*(e||1)+(t||0))}},{key:"delta",get:function(){return Math.abs(this.maximum-this.minimum)}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get
;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Touch=function(e){function t(e,n,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.origin=Application.DreamySketch.Vector.from(e),this.position=this.origin.clone,this.speed=Application.DreamySketch.Vector.from(n),this.identifier=arguments.length>=3?r:1}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e,t){var n=new Application.DreamySketch.Vector(e,t);this.speed.set(n.substract(this.position,!0)),this.position.set(n)}},{key:"updateFromMouseEvent",value:function(e){this.update(e.clientX,e.clientY)}},{key:"updateFromTouchEvent",value:function(e){this.update(e.pageX,e.pageY)}},{key:"identifier",get:function(){return this._identifier},set:function(e){this._identifier=e+""}},{key:"clone",get:function(){var e=new this.constructor(this.position,this.speed,this.identifier);return e.origin=this.origin,e}}],[{key:"fromMouseEvent",value:function(e){return new this({x:e.clientX,y:e.clientY},null,this.mouseIdentifier)}},{key:"fromTouchEvent",value:function(e){return new this({x:e.pageX,y:e.pageY},null,e.identifier)}},{key:"updateMouseIdentifier",value:function(){this.mouseIdentifier="m"+Date.now()+new Array(10).fill(null).map(function(){return Math.floor(10*Math.random())}).join("")}},{key:"init",value:function(){var e=this;this.updateMouseIdentifier(),window.addEventListener("mouseup",function(){return e.updateMouseIdentifier()}),_get(Object.getPrototypeOf(t),"init",this).call(this)}}]),t}(Component);var _bind=Function.prototype.bind,_slice=Array.prototype.slice,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Application.DreamySketch.Vector=function(){function e(t,n){_classCallCheck(this,e),this.coordinates={x:new this.constructor.Coordinate,y:new this.constructor.Coordinate},0!==arguments.length&&this.set(t,n)}return _createClass(e,[{key:"delta",value:function(){return this.substract.apply(this,arguments).abs}},{key:"distance",value:function(){var e=this.delta.apply(this,arguments);return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}},{key:"add",value:function(){var e,t=(e=this.constructor).from.apply(e,arguments);return new this.constructor(this.x+t.x,this.y+t.y)}},{key:"substract",value:function(e){return this.add(this.constructor.from(e).opposite)}},{key:"multiply",value:function(){var e,t=(e=this.constructor).from.apply(e,arguments);return new this.constructor(this.x*t.x,this.y*t.y)}},{key:"divide",value:function(){var e;return this.multiply((e=this.constructor).from.apply(e,arguments).inverse)}},{key:"noise",value:function(e,t,n,r){var o=this.add(new this.constructor(this.noises[0].bound(n,r).time(e,t),this.noises[1].bound(n,r).time(e,t)));return o.noises=this.noises,o}},{key:"set",value:function(e,t){if("object"==typeof e&&null!==e){var n=e;this.set(n.x,n.y)}else this.x=e,this.y=t}},{key:"x",get:function(){return this.coordinates.x.value},set:function(e){this.coordinates.x.value=e}},{key:"y",get:function(){return this.coordinates.y.value},set:function(e){this.coordinates.y.value=e}},{key:"opposite",get:function(){return this.multiply(-1,-1)}},{key:"inverse",get:function(){return new e(1/this.x,1/this.y)}},{key:"double",get:function(){return this.multiply({x:2,y:2})}},{key:"horizontal",get:function(){return this.multiply(1,0)}},{key:"vertical",get:function(){return this.multiply(0,1)}},{key:"average",get:function(){return this.sum/2}},{key:"sum",get:function(){return this.x+this.y}},{key:"abs",get:function(){return new this.constructor(Math.abs(this.x),Math.abs(this.y))}},{key:"clone",get:function(){return new this.constructor(this.x,this.y)}},{key:"noises",get:function(){return Array.isArray(this._noises)||(this._noises=new Array(2).fill(null).map(function(){return new Application.DreamySketch.Noise})),this._noises},set:function(e){this._noises=e}}],[{key:"from",value:function(e){return e instanceof this?e:new(_bind.apply(this,[null].concat(_slice.call(arguments))))}}]),e}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Circle=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.colors=new Application.DreamySketch.Color.List([Application.DreamySketch.Color.magenta,Application.DreamySketch.Color.yellow,Application.DreamySketch.Color.red,Application.DreamySketch.Color.green,Application.DreamySketch.Color.blue]),this.colors.each(function(e){e.alpha=1}),this.noise=new Application.DreamySketch.Noise,this.size=10,this.density=100,this.diffusion=100}return _inherits(t,e),_createClass(t,[{key:"compute",value:function(e,t){var n=this,r=new Application.DreamySketch.Brush.Shape.List;return e.each(function(e){var o=new Application.DreamySketch.Brush.Shape.Ellipse.Circle;o.size=n.noise.bound(1,n.size).time(.001),o.position=e.position.noise(5e-4,t/100,-n.diffusion,n.diffusion),o.color=n.colors.cycle(n.time/500),r.push(o)}),r}}]),t}(Application.DreamySketch.Brush);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Pen=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.color=Application.DreamySketch.Color.black,this.touches=new Application.DreamySketch.Touch.List,this.width=4}return _inherits(t,e),_createClass(t,[{key:"compute",value:function(e){var t,n,r,o=this,i=new Application.DreamySketch.Brush.Shape.List;return e.each(function(e){r=e.speed.abs.sum+2,r>=4&&o.touches.has(e)?(t=new Application.DreamySketch.Brush.Shape.Line,t.origin=o.touches.get(e.identifier).position,t.destination=e.position,t.width=o.width,t.blur=!0,t.color=o.color,i.push(t)):(n=new Application.DreamySketch.Brush.Shape.Ellipse.Circle,n.size=o.width/2,n.position=e.position,n.color=o.color,i.push(n)),o.touches.push(e.clone)}),i}}]),t}(Application.DreamySketch.Brush);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Polygon=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.colors=new Application.DreamySketch.Color.List([Application.DreamySketch.Color.magenta,Application.DreamySketch.Color.yellow,Application.DreamySketch.Color.red,Application.DreamySketch.Color.green,Application.DreamySketch.Color.blue])}return _inherits(t,e),_createClass(t,[{key:"compute",value:function(e){var t=new Application.DreamySketch.Brush.Shape.Polygon;if(t.color=this.colors.cycle(Date.now()/500),t.stroked=!0,t.filled=!1,e.each(function(e){return t.vectors.push(e.position)}),1==e.length){var n=new Application.DreamySketch.Vector(100*(Math.random()*this.density-this.density/2),100*(Math.random()*this.density-this.density/2));t.vectors.push(t.vectors.first.add(n))}return new Application.DreamySketch.Brush.Shape.List(t)}}]),t}(Application.DreamySketch.Brush);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.color=new Application.DreamySketch.Color,this.filled=!0,this.stroked=!1,this.width=1}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(e){e.beginPath(),this.path(e),e.closePath(),this.stroked&&this.stroke(e),this.filled&&this.fill(e)}},{key:"path",value:function(){}},{key:"fill",value:function(e){e.fillStyle=this.color.string,e.fill()}},{key:"stroke",value:function(e){e.strokeStyle=this.color.string,e.stroke()}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.Ellipse=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.position=new Application.DreamySketch.Vector,this.size=new Application.DreamySketch.Vector.Size,this.begining=0,this.ending=1,this.rotation=0}return _inherits(t,e),_createClass(t,[{key:"path",value:function(e){e.ellipse(this.position.x,this.position.y,this.size.width,this.size.height,this.rotation,this.begining*Math.PI*2,this.ending*Math.PI*2)}}]),t}(Application.DreamySketch.Brush.Shape);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.Line=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.origin=new Application.DreamySketch.Vector,this.destination=new Application.DreamySketch.Vector,this.stroked=!0,this.filled=!1,this.width=1}return _inherits(t,e),_createClass(t,[{key:"path",value:function(e){e.moveTo(this.origin.x,this.origin.y),e.lineTo(this.destination.x,this.destination.y)}},{key:"stroke",value:function(e){e.lineWidth=this.width,_get(Object.getPrototypeOf(t.prototype),"stroke",this).call(this,e)}}]),t}(Application.DreamySketch.Brush.Shape);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.List=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(e){this.any&&(this.each(function(t){return t.draw(e.context)}),e.blank=!1)}}]),t}(Component.List);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.Polygon=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.vectors=new Application.DreamySketch.Vector.List}return _inherits(t,e),_createClass(t,[{key:"path",value:function(e){this.vectors.each(function(t){return e.lineTo(t.x,t.y)})}}]),t}(Application.DreamySketch.Brush.Shape);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.Ellipse.Circle=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.size=0}return _inherits(t,e),_createClass(t,[{key:"path",value:function(e){e.ellipse(this.position.x,this.position.y,this.size/2,this.size/2,this.rotation,this.begining*Math.PI*2,this.ending*Math.PI*2)}}]),t}(Application.DreamySketch.Brush.Shape.Ellipse);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.Rectangle=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.position=new Application.DreamySketch.Vector,this.size=new Application.DreamySketch.Vector.Size}return _inherits(t,e),_createClass(t,[{key:"vectors",get:function(){return(new Application.DreamySketch.Vector.List).push(this.position,this.position.add(this.size.horizontal),this.position.add(this.size),this.position.add(this.size.vertical))}}]),t}(Application.DreamySketch.Brush.Shape.Polygon);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Brush.Shape.Triangle=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.position=new Application.DreamySketch.Vector,this.size=new Application.DreamySketch.Vector.Size}return _inherits(t,e),_createClass(t,[{key:"vectors",get:function(){return(new Application.DreamySketch.Vector.List).push(this.position.add(this.size.horizontal.divide(2)),this.position.add(this.size),this.position.add(this.size.vertical))}}]),t}(Application.DreamySketch.Brush.Shape.Polygon);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Component=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,null,[{key:"minimum",get:function(){return 0}}]),t}(Component.Number);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Format=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.color=e}return _inherits(t,e),_createClass(t,[{key:"value",get:function(){return""},set:function(){}}],[{key:"match",value:function(e,t){var n=this;return e=(e+"").trim(),(Array.isArray(this.pattern)?this.pattern:[this.pattern]).forEach(function(r){var o=e.match(r);if(null!==o)return"function"==typeof t&&t.apply(n,Array.prototype.slice.call(o)),!1}),"function"==typeof t&&t.apply(this),!1}},{key:"matching",value:function(e){var t=null;return this.components.forEach(function(n){if(n.match(e))return t=n,!1}),t}},{key:"set",value:function(e,t){new this(e).value=t}},{key:"pattern",get:function(){return/.*/}}]),t}(Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.List=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"get",value:function(e){var n=Math.floor(e);if(n===e)return _get(Object.getPrototypeOf(t.prototype),"get",this).call(this,e);var r=e-n,o=_get(Object.getPrototypeOf(t.prototype),"get",this).call(this,n).clone,i=_get(Object.getPrototypeOf(t.prototype),"get",this).call(this,(n+1)%this.length);return o.map(function(e,t){return(1-r)*t+r*i[e]},!0)}}]),t}(Component.List);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Component.Alpha=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,null,[{key:"maximum",get:function(){return 1}},{key:"default",get:function(){return 1}}]),t}(Application.DreamySketch.Color.Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Component.Rgb=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,null,[{key:"cast",value:function(e){return parseInt(e,10)}},{key:"filter",value:function(e){return Math.round(e)}},{key:"maximum",get:function(){return 255}}]),t}(Application.DreamySketch.Color.Component);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Format.Hexadecimal=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"value",get:function(){return"#"+this.constructor.convert(this.color.r)+this.constructor.convert(this.color.g)+this.constructor.convert(this.color.b)},set:function(e){var t=this;this.constructor.match(e,function(e,n,r){t.color.r=t.constructor.resolve(e),t.color.g=t.constructor.resolve(n),t.color.b=t.constructor.resolve(r)})}}],[{key:"convert",value:function(e){return e=e.toString(16),(e.length<2?"0":"")+e}},{key:"resolve",value:function(e){return parseInt(e.length<2?e+e:e,16)}},{key:"pattern",get:function(){return[/^#([0-9a-z]{2})([0-9a-z]{2})([0-9a-z]{2})$/i,/^#([0-9a-z])([0-9a-z])([0-9a-z])$/i]}}]),t}(Application.DreamySketch.Color.Format);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Format.Rgb=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"value",get:function(){return"rgb("+[this.color.r,this.color.g,this.color.b].join(", ")+")"},set:function(e){var t=this;this.constructor.match(e,function(e,n,r){t.color.r=e,t.color.g=n,t.color.b=r})}}],[{key:"pattern",get:function(){return/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/}}]),t}(Application.DreamySketch.Color.Format);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Color.Format.Rgba=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"value",get:function(){return"rgba("+[this.color.r,this.color.g,this.color.b,this.color.a].join(", ")+")"},set:function(e){var t=this;this.constructor.match(e,function(e,n,r,o){t.color.r=e,t.color.g=n,t.color.b=r,t.color.a=o})}}],[{key:"pattern",get:function(){return/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*((:?\d*\.)?\d+)\s*\)$/}}]),t}(Application.DreamySketch.Color.Format);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Touch.List=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.object={}}return _inherits(t,e),_createClass(t,[{key:"push",value:function(e){return this.object[e.identifier]=e,this}},{key:"clear",value:function(){return this.object={},this}},{key:"get",value:function(e){return this.object[e+""]}},{key:"has",value:function(e){return!!this.get(e.identifier)}},{key:"each",value:function(e){var t=this;return this.array.forEach(function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.call.apply(e,[t].concat(r))}),this}},{key:"remove",value:function(e){delete this.object[e.identifier]}},{key:"filter",value:function(e){var t=this;return this.each(function(n,r){!1===e.call(t,n,r)&&t.remove(n)}),this}},{key:"updateFromMouseEvent",value:function(e){return this.first?this.first.updateFromMouseEvent(e):this.push(Application.DreamySketch.Touch.fromMouseEvent(e)),this}},{key:"updateFromTouchEvent",value:function(e){var t=this,n=[];return Array.prototype.forEach.call(e.targetTouches,function(e){var r=t.get(e.identifier);r?r.updateFromTouchEvent(e):(r=Application.DreamySketch.Touch.fromTouchEvent(e),t.push(r)),n.push(r.identifier)}),this.filter(function(e){return n.includes(e.identifier)}),this}},{key:"array",get:function(){return Object.values(this.object)}},{key:"first",get:function(){return this.array[0]}},{key:"length",get:function(){return this.array.length}},{key:"any",get:function(){return 0!==this.length}}]),t}(Component);var _get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Vector.Coordinate=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),t}(Component.Number);var _get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Vector.List=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),t}(Component.List);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(a!==undefined){if("value"in a)return a.value;var c=a.get;return c===undefined?undefined:c.call(u)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=i,n=u,r=!0,a=s=undefined}};Application.DreamySketch.Vector.Size=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}}]),t}(Application.DreamySketch.Vector);